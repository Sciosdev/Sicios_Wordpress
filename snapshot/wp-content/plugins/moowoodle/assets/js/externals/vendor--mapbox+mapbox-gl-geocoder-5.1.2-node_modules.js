(globalThis.webpackChunkmoowoodle=globalThis.webpackChunkmoowoodle||[]).push([[318],{7926:t=>{function e(){}e.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(e,i){window.navigator.geolocation.getCurrentPosition(e,i,t)})}},t.exports=e},13813:t=>{function e(t){const e=t.address||"",i=t.text||"",s=t.place_name||"",o={address:s.split(",")[0],houseNumber:e,street:i,placeName:s};return t.context.forEach(function(t){const e=t.id.split(".")[0];o[e]=t.text}),o}t.exports={transformFeatureToGeolocationText:function(t,i){const s=e(t),o=["address","street","place","country"];if("function"==typeof i)return i(s);const n=o.indexOf(i);return(-1===n?o:o.slice(n)).reduce(function(t,e){return s[e]?(""!==t&&(t+=", "),t+s[e]):t},"")},getAddressInfo:e,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/}},49528:t=>{t.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},52124:(t,e,i)=>{"use strict";var s=i(4979),o=i(63850),n=i(45918),r=i(80381).EventEmitter,a=i(49528),h=i(47487),l=i(62379),c=i(52167),u=i(59339),d=i(68855),p=i(7926),g=i(13813);function f(t){this._eventEmitter=new r,this.options=n({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new p}f.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",useBrowserFocus:!1,getItemValue:function(t){return t.place_name},render:function(t){var e,i=(e=t.place_name,e?String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"").split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+i[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"}},_headers:{},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const i=t.onAdd();e.appendChild(i)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const i=document.querySelectorAll(t);if(0===i.length)throw new Error("Element ",t,"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,i[0])}}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=l(h({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new c(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this),this._onSuggestionItemFocus=this._onSuggestionItemFocus.bind(this),this._onSuggestionItemKeyDown=this._onSuggestionItemKeydown.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",o(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(t){this.eventManager.keyevent(t,this)}.bind(this));var n=document.createElement("div");n.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var r=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(r),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),n.appendChild(this._clearEl),n.appendChild(this._loadingEl),e.appendChild(i),e.appendChild(this._inputEl),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(a),n.appendChild(this._geolocateEl),this._showGeolocateButton()}var u=this._typeahead=new s(this._inputEl,[],{hideOnBlur:!this.options.useBrowserFocus,filter:!1,minLength:this.options.minLength,limit:this.options.limit});e.insertBefore(n,u.list.wrapper),this.setRenderFunction(this.options.render),u.getItemValue=this.options.getItemValue;const d=this._typeahead.handleKeyDown.bind(this._typeahead),p=this._typeahead.handleKeyUp.bind(this._typeahead);this._typeahead.handleKeyUp,this.options.useBrowserFocus&&(this._typeahead.handleKeyDown=function(t){if(9!==t.keyCode||u.list.isEmpty())return 40===t.keyCode?(this._typeahead.list.active=0,this._typeahead.list.element.querySelectorAll("li").forEach(function(t){t.classList.remove("active")}),this._typeahead.list.element.querySelectorAll("li")[0].classList.add("active"),void this._typeahead.list.element.querySelectorAll("li")[0].focus()):38===t.keyCode?(this._typeahead.list.active=u.list.items.length-1,this._typeahead.list.element.querySelectorAll("li").forEach(function(t){t.classList.remove("active")}),this._typeahead.list.element.querySelectorAll("li")[this._typeahead.list.active].classList.add("active"),void this._typeahead.list.element.querySelectorAll("li")[this._typeahead.list.active].focus()):void d(t)}.bind(this),this._typeahead.handleKeyUp=function(t){t&&16===t.keyCode?t.preventDefault():p(t)});var g,f=u.list.draw,m=this._footerNode=((g=document.createElement("div")).className="mapboxgl-ctrl-geocoder--powered-by",g.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',g),_=this;return u.list.draw=function(){_.options.useBrowserFocus&&u.list.element.querySelectorAll("li").forEach(function(t){t.removeEventListener("focus",_._onSuggestionItemFocus),t.removeEventListener("keydown",_._onSuggestionItemKeyDown)}),f.call(this),_.options.useBrowserFocus&&u.list.element.querySelectorAll("li").forEach(function(t,e){0===e&&t.focus(),t.setAttribute("data-index",e),t.tabIndex=0,t.addEventListener("focus",this._onSuggestionItemFocus),t.addEventListener("keydown",this._onSuggestionItemKeyDown)}.bind(_)),m.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),m.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(m)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_onSuggestionItemKeydown(t){const e=t.keyCode;if(9!==e)if(13===e){t.preventDefault();const e=this._typeahead.list.element.querySelector(".active");if(e){const t=e.getAttribute("data-index"),i=this._typeahead.list.items[t];i&&(this._typeahead.value(i.original),this._typeahead.list.hide())}}else if(38===e||40===e){const i=this._typeahead.list.element.querySelectorAll("li");if(i.length>0){if(38===e){if(!(this._typeahead.list.active>0))return void this._typeahead.el.focus();t.preventDefault(),this._typeahead.list.active--}else if(40===e){if(t.preventDefault(),!(this._typeahead.list.active<i.length-1))return;this._typeahead.list.active++}i.forEach(function(t){t.classList.remove("active")});const s=i[this._typeahead.list.active];s&&(s.classList.add("active"),s.focus())}}},_onSuggestionItemFocus(t){this._typeahead.list.active=t.target.getAttribute("data-index"),this._typeahead.list.element.querySelectorAll("li").forEach(function(t){t.classList.remove("active")}),t.target.classList.add("active")},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const i={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const t=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(t),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(i).send().then(function(t){const i=t.body.features[0];if(i){const t=g.transformFeatureToGeolocationText(i,this.options.addressAccuracy);this._setInputValue(t),i.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:i})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){1===t.code?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width",18),i.setAttribute("height",18),i.innerHTML=e,i},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,i=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var s=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!s||!s.value)return this.fresh=!0,t.keyCode!==i&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),t.metaKey||-1!==[i,e,37,39,13,38,40].indexOf(t.keyCode)||s.value.length>=this.options.minLength&&this._geocode(s.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&a[t.properties.short_code])e=n({},this.options.flyTo),this._map&&this._map.fitBounds(a[t.properties.short_code].bbox,e);else if(t.bbox){var i=t.bbox;e=n({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],e)}else{var s={zoom:this.options.zoom};e=n({},s,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){return t.localGeocoderOnly?1:t.reverseGeocode&&g.REVERSE_GEOCODE_COORD_RGX.test(e)?2:0},_setupConfig:function(t,e){const i=/[\s,]+/;var s=this,o=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"].reduce(function(t,e){if(void 0===s.options[e]||null===s.options[e])return t;["countries","types","language"].indexOf(e)>-1?t[e]=s.options[e].split(i):t[e]=s.options[e];const o="number"==typeof s.options[e].longitude&&"number"==typeof s.options[e].latitude;if("proximity"===e&&o){const i=s.options[e].longitude,o=s.options[e].latitude;t[e]=[i,o]}return t},{});switch(t){case 2:var r=e.split(i).map(function(t){return parseFloat(t,10)});s.options.flipCoordinates||r.reverse(),!o.types||o.types[0],o=n(o,{query:r,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(t){t in o&&delete o[t]});break;case 0:{const t=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(t)&&(e=e.replace(/,/g," ")),o=n(o,{query:e})}}return o.session_token=this.eventManager.getSessionId(),o},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),i=this._setupConfig(e,t);var s;switch(e){case 1:s=Promise.resolve();break;case 0:s=this.geocoderService.forwardGeocode(i).send();break;case 2:s=this.geocoderService.reverseGeocode(i).send()}var o=this.options.localGeocoder&&this.options.localGeocoder(t)||[],n=[],r=null;return s.catch(function(t){r=t}.bind(this)).then(function(e){this._hideLoadingIcon();var s={};return e?"200"==e.statusCode&&((s=e.body).request=e.request,s.headers=e.headers,this._headers=e.headers):s={type:"FeatureCollection",features:[]},s.config=i,this.fresh&&(this.eventManager.start(this),this.fresh=!1),s.features&&s.features.length&&s.features.map(function(t){t._source="mapbox"}),s.features=s.features?o.concat(s.features):o,this.options.externalGeocoder?(n=this.options.externalGeocoder(t,s.features)||Promise.resolve([])).then(function(t){return s.features=s.features?t.concat(s.features):t,s},function(){return s}):s}.bind(this)).then(function(t){if(r)throw r;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter)),t.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",t),this._typeahead.update(t.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}.bind(this)).catch(function(t){this._hideLoadingIcon(),this._hideAttribution(),o.length&&this.options.localGeocoder||n.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(o)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:o}),this._eventEmitter.emit("error",{error:t})}.bind(this)),s},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus(),this.options.useBrowserFocus&&this._typeahead.list.hide()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var i=e.features[0];this._typeahead.selected=i,this._inputEl.value=i.place_name,this._onChange()}},_updateProximity:function(){if(this._map&&this.options.trackProximity)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderLocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderUserDeniedGeolocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=d.language(t),i=u.placeholder[e];if(i)return i}return"Search"},setInput:function(t,e){return void 0===e&&(e=!1),this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&(e?this._geocode(t):this._onChange()),this},setProximity:function(t,e=!0){return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.options.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=l(h({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=l(h({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e=n({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}},t.exports=f},52167:(t,e,i)=>{"use strict";var s=i(54283).Ak;function o(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}o.prototype={select:function(t,e){var i=this.getEventPayload("search.select",e,{selectedFeature:t});if(i&&(i.resultIndex!==this.lastSentIndex||i.queryString!==this.lastSentInput)&&-1!=i.resultIndex)return this.lastSentIndex=i.resultIndex,this.lastSentInput=i.queryString,this.push(i)},start:function(t){var e=this.getEventPayload("search.start",t);if(e)return this.push(e)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){var i=this.getEventPayload("search.keystroke",e,{key:t.key});if(i)return this.push(i)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var i=this.getRequestOptions(t);this.request(i,function(t){return t?this.handleError(t,e):e?e():void 0}.bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e,i={}){if("search.select"===t&&!i.selectedFeature||"search.keystroke"===t&&!i.key)return null;var s;if(e.options.proximity)if("object"==typeof e.options.proximity)s=[e.options.proximity.longitude,e.options.proximity.latitude];else if("ip"===e.options.proximity){var o=e._headers?e._headers["ip-proximity"]:null;s=o&&"string"==typeof o?o.split(",").map(parseFloat):[999,999]}else s=e.options.proximity;else s=null;var n=e._map?e._map.getZoom():void 0,r={event:t,version:this.getEventSchemaVersion(t),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:s,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:n,keyboardLocale:this.locale};if("search.select"===t?r.queryString=e.inputString:"search.select"!=t&&e._inputEl?r.queryString=e._inputEl.value:r.queryString=e.inputString,["search.keystroke","search.select"].includes(t)&&(r.path="geocoding/v5/mapbox.places"),"search.keystroke"===t&&i.key)r.lastAction=i.key;else if("search.select"===t&&i.selectedFeature){var a=i.selectedFeature,h=this.getSelectedIndex(a,e);if(r.resultIndex=h,r.resultPlaceName=a.place_name,r.resultId=a.id,a.properties&&(r.resultMapboxId=a.properties.mapbox_id),e._typeahead){var l=e._typeahead.data;l&&l.length>0&&(r.suggestionIds=this.getSuggestionIds(l),r.suggestionNames=this.getSuggestionNames(l),r.suggestionTypes=this.getSuggestionTypes(l),r.suggestionSources=this.getSuggestionSources(l))}}return this.validatePayload(r)?r:null},request:function(t,e){var i=new XMLHttpRequest;for(var s in i.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?e(null):e(this.statusText)},i.open(t.method,t.host+"/"+t.path,!0),t.headers){var o=t.headers[s];i.setRequestHeader(s,o)}i.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return s()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var i=e._typeahead.data,s=t.id;return i.map(function(t){return t.id}).indexOf(s)}},getSuggestionIds:function(t){return t.map(function(t){return t.properties?t.properties.mapbox_id||"":t.id||""})},getSuggestionNames:function(t){return t.map(function(t){return t.place_name||""})},getSuggestionTypes:function(t){return t.map(function(t){return t.place_type&&Array.isArray(t.place_type)&&t.place_type[0]||""})},getSuggestionSources:function(t){return t.map(function(t){return t._source||""})},getEventSchemaVersion:function(t){return["search.keystroke","search.select"].includes(t)?"2.2":"2.0"},validatePayload:function(t){if(!t||!t.event)return!1;var e=t.event;return"search.start"===e?this.objectHasRequiredProps(t,["event","created","sessionIdentifier","queryString"]):"search.keystroke"===e?this.objectHasRequiredProps(t,["event","created","sessionIdentifier","queryString","lastAction"]):"search.select"!==e||this.objectHasRequiredProps(t,["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"])},objectHasRequiredProps:function(t,e){return e.every(function(e){return"queryString"===e?"string"==typeof t[e]&&t[e].length>0:void 0!==t[e]})},shouldEnableLogging:function(t){return!1!==t.enableEventLogging&&(!t.origin||"https://api.mapbox.com"===t.origin)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}},t.exports=o},59339:t=>{"use strict";t.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"}}}}]);